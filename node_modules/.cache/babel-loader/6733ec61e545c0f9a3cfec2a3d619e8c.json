{"ast":null,"code":"var _jsxFileName = \"/Users/natellaverde/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/MC_Portfolio/src/app/components/page/usersListPage/usersListPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { paginate } from \"../../../utils/paginate\";\nimport Pagination from \"../../common/pagination\";\nimport GroupList from \"../../common/groupList\";\nimport UserTable from \"../../ui/usersTable\";\nimport _ from \"lodash\";\nimport { getProfessions, getProfessionsLoadingStatus } from \"../../../store/professions\";\nimport { useSelector } from \"react-redux\";\nimport { getCurrentUserId, getUsersList } from \"../../../store/users\";\nimport style from \"./usersListPage.module.css\";\nimport SearchStatus from \"../../ui/searchStatus/searchStatus\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UsersListPage = () => {\n  _s();\n  const users = useSelector(getUsersList());\n  const currentUserId = useSelector(getCurrentUserId());\n  const professions = useSelector(getProfessions());\n  const professionsLoading = useSelector(getProfessionsLoadingStatus());\n  const [currentPage, setCurrentPage] = useState(1);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedProf, setSelectedProf] = useState();\n  const [sortBy, setSortBy] = useState({\n    path: \"name\",\n    order: \"asc\"\n  });\n  const pageSize = 8;\n  const handleDelete = userId => {\n    console.log(\"delete user\");\n    // setUsers(users.filter((user) => user._id !== userId));\n  };\n\n  const handleToggleBookMark = id => {\n    const newArray = users === null || users === void 0 ? void 0 : users.map(user => {\n      if (user._id === id) {\n        return {\n          ...user,\n          bookmark: !user.bookmark\n        };\n      }\n      return user;\n    });\n    // setUsers(newArray);\n    console.log(newArray);\n  };\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [selectedProf, searchQuery]);\n  const handleProfessionSelect = item => {\n    if (searchQuery !== \"\") setSearchQuery(\"\");\n    setSelectedProf(item);\n  };\n  const handleSearchQuery = _ref => {\n    let {\n      target\n    } = _ref;\n    setSelectedProf(undefined);\n    setSearchQuery(target.value);\n  };\n  const handlePageChange = pageIndex => {\n    setCurrentPage(pageIndex);\n  };\n  const handleSort = item => {\n    setSortBy(item);\n  };\n  function filterUsers(data) {\n    const filteredUsers = searchQuery ? data.filter(user => user.name.toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1) : selectedProf ? data.filter(user => user.profession === selectedProf._id) : data;\n    return filteredUsers.filter(u => u._id !== currentUserId);\n  }\n  const filteredUsers = filterUsers(users);\n  const count = filteredUsers.length;\n  const sortedUsers = _.orderBy(filteredUsers, [sortBy.path], [sortBy.order]);\n  const usersCrop = paginate(sortedUsers, currentPage, pageSize);\n  const clearFilter = () => {\n    setSelectedProf();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex p-3 \" + style.blockUserPage,\n    children: [professions && !professionsLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column flex-shrink-0 p-0-3 me-3 \" + style.blockGroupList,\n      children: [/*#__PURE__*/_jsxDEV(GroupList, {\n        selectedItem: selectedProf,\n        items: professions,\n        onItemSelect: handleProfessionSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary mt-2\",\n        onClick: clearFilter,\n        children: \"Clear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column \" + style.blockSearchStatus,\n      children: [/*#__PURE__*/_jsxDEV(SearchStatus, {\n        length: count\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-control\",\n        type: \"text\",\n        name: \"searchQuery\",\n        placeholder: \"Search...\",\n        onChange: handleSearchQuery,\n        value: searchQuery\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), count > 0 && /*#__PURE__*/_jsxDEV(UserTable, {\n        users: usersCrop,\n        onSort: handleSort,\n        selectedSort: sortBy,\n        onDelete: handleDelete,\n        onToggleBookMark: handleToggleBookMark\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Pagination, {\n          itemsCount: count,\n          pageSize: pageSize,\n          currentPage: currentPage,\n          onPageChange: handlePageChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n};\n_s(UsersListPage, \"Mz4H6Br3h7sZX617ABhzB8acV7o=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector];\n});\n_c = UsersListPage;\nUsersListPage.propTypes = {\n  users: PropTypes.array\n};\nexport default UsersListPage;\nvar _c;\n$RefreshReg$(_c, \"UsersListPage\");","map":{"version":3,"names":["React","useState","useEffect","PropTypes","paginate","Pagination","GroupList","UserTable","_","getProfessions","getProfessionsLoadingStatus","useSelector","getCurrentUserId","getUsersList","style","SearchStatus","jsxDEV","_jsxDEV","UsersListPage","_s","users","currentUserId","professions","professionsLoading","currentPage","setCurrentPage","searchQuery","setSearchQuery","selectedProf","setSelectedProf","sortBy","setSortBy","path","order","pageSize","handleDelete","userId","console","log","handleToggleBookMark","id","newArray","map","user","_id","bookmark","handleProfessionSelect","item","handleSearchQuery","_ref","target","undefined","value","handlePageChange","pageIndex","handleSort","filterUsers","data","filteredUsers","filter","name","toLowerCase","indexOf","profession","u","count","length","sortedUsers","orderBy","usersCrop","clearFilter","className","blockUserPage","children","blockGroupList","selectedItem","items","onItemSelect","fileName","_jsxFileName","lineNumber","columnNumber","onClick","blockSearchStatus","type","placeholder","onChange","onSort","selectedSort","onDelete","onToggleBookMark","itemsCount","onPageChange","_c","propTypes","array","$RefreshReg$"],"sources":["/Users/natellaverde/Проекты/MC_Portfolio/src/app/components/page/usersListPage/usersListPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { paginate } from \"../../../utils/paginate\";\nimport Pagination from \"../../common/pagination\";\nimport GroupList from \"../../common/groupList\";\nimport UserTable from \"../../ui/usersTable\";\nimport _ from \"lodash\";\nimport {\n    getProfessions,\n    getProfessionsLoadingStatus\n} from \"../../../store/professions\";\nimport { useSelector } from \"react-redux\";\nimport { getCurrentUserId, getUsersList } from \"../../../store/users\";\nimport style from \"./usersListPage.module.css\";\nimport SearchStatus from \"../../ui/searchStatus/searchStatus\";\n\nconst UsersListPage = () => {\n    const users = useSelector(getUsersList());\n    const currentUserId = useSelector(getCurrentUserId());\n\n    const professions = useSelector(getProfessions());\n    const professionsLoading = useSelector(getProfessionsLoadingStatus());\n    const [currentPage, setCurrentPage] = useState(1);\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const [selectedProf, setSelectedProf] = useState();\n    const [sortBy, setSortBy] = useState({ path: \"name\", order: \"asc\" });\n    const pageSize = 8;\n\n    const handleDelete = (userId) => {\n        console.log(\"delete user\");\n        // setUsers(users.filter((user) => user._id !== userId));\n    };\n    const handleToggleBookMark = (id) => {\n        const newArray = users?.map((user) => {\n            if (user._id === id) {\n                return { ...user, bookmark: !user.bookmark };\n            }\n            return user;\n        });\n        // setUsers(newArray);\n        console.log(newArray);\n    };\n\n    useEffect(() => {\n        setCurrentPage(1);\n    }, [selectedProf, searchQuery]);\n\n    const handleProfessionSelect = (item) => {\n        if (searchQuery !== \"\") setSearchQuery(\"\");\n        setSelectedProf(item);\n    };\n    const handleSearchQuery = ({ target }) => {\n        setSelectedProf(undefined);\n        setSearchQuery(target.value);\n    };\n\n    const handlePageChange = (pageIndex) => {\n        setCurrentPage(pageIndex);\n    };\n    const handleSort = (item) => {\n        setSortBy(item);\n    };\n\n    function filterUsers(data) {\n        const filteredUsers = searchQuery\n            ? data.filter(\n                  (user) =>\n                      user.name\n                          .toLowerCase()\n                          .indexOf(searchQuery.toLowerCase()) !== -1\n              )\n            : selectedProf\n            ? data.filter((user) => user.profession === selectedProf._id)\n            : data;\n        return filteredUsers.filter((u) => u._id !== currentUserId);\n    }\n    const filteredUsers = filterUsers(users);\n    const count = filteredUsers.length;\n    const sortedUsers = _.orderBy(filteredUsers, [sortBy.path], [sortBy.order]);\n    const usersCrop = paginate(sortedUsers, currentPage, pageSize);\n    const clearFilter = () => {\n        setSelectedProf();\n    };\n\n    return (\n        <div className={\"d-flex p-3 \" + style.blockUserPage}>\n            {professions && !professionsLoading && (\n                <div className={\"d-flex flex-column flex-shrink-0 p-0-3 me-3 \" + style.blockGroupList}>\n                    <GroupList\n                        selectedItem={selectedProf}\n                        items={professions}\n                        onItemSelect={handleProfessionSelect}\n                    />\n                    <button\n                        className=\"btn btn-secondary mt-2\"\n                        onClick={clearFilter}\n                    >\n                        Clear\n                    </button>\n                </div>\n            )}\n            <div className={\"d-flex flex-column \" + style.blockSearchStatus}>\n                <SearchStatus length={count}/>\n                <input\n                    className=\"form-control\"\n                    type=\"text\"\n                    name=\"searchQuery\"\n                    placeholder=\"Search...\"\n                    onChange={handleSearchQuery}\n                    value={searchQuery}\n                />\n                {count > 0 && (\n                    <UserTable\n                        users={usersCrop}\n                        onSort={handleSort}\n                        selectedSort={sortBy}\n                        onDelete={handleDelete}\n                        onToggleBookMark={handleToggleBookMark}\n                    />\n                )}\n                <div className=\"d-flex justify-content-center\">\n                    <Pagination\n                        itemsCount={count}\n                        pageSize={pageSize}\n                        currentPage={currentPage}\n                        onPageChange={handlePageChange}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n};\nUsersListPage.propTypes = {\n    users: PropTypes.array\n};\n\nexport default UsersListPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}