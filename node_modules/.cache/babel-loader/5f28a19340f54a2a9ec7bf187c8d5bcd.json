{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport qualityService from \"../services/qaulity.service\";\nimport isOutdated from \"../utils/isOutdated\";\nconst qualitiesSlice = createSlice({\n  name: \"qualities\",\n  initialState: {\n    entities: null,\n    isLoading: true,\n    error: null,\n    lastFetch: null\n  },\n  reducers: {\n    qualitiesRequested: state => {\n      state.isLoading = true;\n    },\n    qualitiesReceved: (state, action) => {\n      state.entities = action.payload;\n      state.lastFetch = Date.now();\n      state.isLoading = false;\n    },\n    qualitiesRequestFiled: (state, action) => {\n      state.error = action.payload;\n      state.isLoading = false;\n    }\n  }\n});\nconst {\n  reducer: qualitiesReducer,\n  actions\n} = qualitiesSlice;\nconst {\n  qualitiesRequested,\n  qualitiesReceved,\n  qualitiesRequestFiled\n} = actions;\nexport const loadQualitiesList = () => async (dispatch, getState) => {\n  const {\n    lastFetch\n  } = getState().qualities;\n  if (isOutdated(lastFetch)) {\n    dispatch(qualitiesRequested());\n    try {\n      const {\n        content\n      } = await qualityService.fetchAll();\n      dispatch(qualitiesReceved(content));\n    } catch (error) {\n      dispatch(qualitiesRequestFiled(error.message));\n    }\n  }\n};\nexport const getQualities = () => state => state.qualities.entities;\nexport const getQualitiesLoadingStatus = () => state => state.qualities.isLoading;\nexport const getQulitiesByIds = qualitiesIds => state => {\n  if (state.qualities.entities) {\n    const qualitiesArray = [];\n    for (const qualId of qualitiesIds) {\n      for (const quality of state.qualities.entities) {\n        if (quality._id === qualId) {\n          qualitiesArray.push(quality);\n          break;\n        }\n      }\n    }\n    return qualitiesArray;\n  }\n  return [];\n};\nexport default qualitiesReducer;","map":{"version":3,"names":["createSlice","qualityService","isOutdated","qualitiesSlice","name","initialState","entities","isLoading","error","lastFetch","reducers","qualitiesRequested","state","qualitiesReceved","action","payload","Date","now","qualitiesRequestFiled","reducer","qualitiesReducer","actions","loadQualitiesList","dispatch","getState","qualities","content","fetchAll","message","getQualities","getQualitiesLoadingStatus","getQulitiesByIds","qualitiesIds","qualitiesArray","qualId","quality","_id","push"],"sources":["/Users/natellaverde/Проекты/MC_Portfolio/src/app/store/qualities.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport qualityService from \"../services/qaulity.service\";\nimport isOutdated from \"../utils/isOutdated\";\n\nconst qualitiesSlice = createSlice({\n    name: \"qualities\",\n    initialState: {\n        entities: null,\n        isLoading: true,\n        error: null,\n        lastFetch: null\n    },\n    reducers: {\n        qualitiesRequested: (state) => {\n            state.isLoading = true;\n        },\n        qualitiesReceved: (state, action) => {\n            state.entities = action.payload;\n            state.lastFetch = Date.now();\n            state.isLoading = false;\n        },\n        qualitiesRequestFiled: (state, action) => {\n            state.error = action.payload;\n            state.isLoading = false;\n        }\n    }\n});\n\nconst { reducer: qualitiesReducer, actions } = qualitiesSlice;\nconst { qualitiesRequested, qualitiesReceved, qualitiesRequestFiled } = actions;\n\nexport const loadQualitiesList = () => async (dispatch, getState) => {\n    const { lastFetch } = getState().qualities;\n    if (isOutdated(lastFetch)) {\n        dispatch(qualitiesRequested());\n        try {\n            const { content } = await qualityService.fetchAll();\n            dispatch(qualitiesReceved(content));\n        } catch (error) {\n            dispatch(qualitiesRequestFiled(error.message));\n        }\n    }\n};\n\nexport const getQualities = () => (state) => state.qualities.entities;\nexport const getQualitiesLoadingStatus = () => (state) =>\n    state.qualities.isLoading;\nexport const getQulitiesByIds = (qualitiesIds) => (state) => {\n    if (state.qualities.entities) {\n        const qualitiesArray = [];\n        for (const qualId of qualitiesIds) {\n            for (const quality of state.qualities.entities) {\n                if (quality._id === qualId) {\n                    qualitiesArray.push(quality);\n                    break;\n                }\n            }\n        }\n        return qualitiesArray;\n    }\n    return [];\n};\n\nexport default qualitiesReducer;\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,cAAc,MAAM,6BAA6B;AACxD,OAAOC,UAAU,MAAM,qBAAqB;AAE5C,MAAMC,cAAc,GAAGH,WAAW,CAAC;EAC/BI,IAAI,EAAE,WAAW;EACjBC,YAAY,EAAE;IACVC,QAAQ,EAAE,IAAI;IACdC,SAAS,EAAE,IAAI;IACfC,KAAK,EAAE,IAAI;IACXC,SAAS,EAAE;EACf,CAAC;EACDC,QAAQ,EAAE;IACNC,kBAAkB,EAAGC,KAAK,IAAK;MAC3BA,KAAK,CAACL,SAAS,GAAG,IAAI;IAC1B,CAAC;IACDM,gBAAgB,EAAEA,CAACD,KAAK,EAAEE,MAAM,KAAK;MACjCF,KAAK,CAACN,QAAQ,GAAGQ,MAAM,CAACC,OAAO;MAC/BH,KAAK,CAACH,SAAS,GAAGO,IAAI,CAACC,GAAG,CAAC,CAAC;MAC5BL,KAAK,CAACL,SAAS,GAAG,KAAK;IAC3B,CAAC;IACDW,qBAAqB,EAAEA,CAACN,KAAK,EAAEE,MAAM,KAAK;MACtCF,KAAK,CAACJ,KAAK,GAAGM,MAAM,CAACC,OAAO;MAC5BH,KAAK,CAACL,SAAS,GAAG,KAAK;IAC3B;EACJ;AACJ,CAAC,CAAC;AAEF,MAAM;EAAEY,OAAO,EAAEC,gBAAgB;EAAEC;AAAQ,CAAC,GAAGlB,cAAc;AAC7D,MAAM;EAAEQ,kBAAkB;EAAEE,gBAAgB;EAAEK;AAAsB,CAAC,GAAGG,OAAO;AAE/E,OAAO,MAAMC,iBAAiB,GAAGA,CAAA,KAAM,OAAOC,QAAQ,EAAEC,QAAQ,KAAK;EACjE,MAAM;IAAEf;EAAU,CAAC,GAAGe,QAAQ,CAAC,CAAC,CAACC,SAAS;EAC1C,IAAIvB,UAAU,CAACO,SAAS,CAAC,EAAE;IACvBc,QAAQ,CAACZ,kBAAkB,CAAC,CAAC,CAAC;IAC9B,IAAI;MACA,MAAM;QAAEe;MAAQ,CAAC,GAAG,MAAMzB,cAAc,CAAC0B,QAAQ,CAAC,CAAC;MACnDJ,QAAQ,CAACV,gBAAgB,CAACa,OAAO,CAAC,CAAC;IACvC,CAAC,CAAC,OAAOlB,KAAK,EAAE;MACZe,QAAQ,CAACL,qBAAqB,CAACV,KAAK,CAACoB,OAAO,CAAC,CAAC;IAClD;EACJ;AACJ,CAAC;AAED,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAOjB,KAAK,IAAKA,KAAK,CAACa,SAAS,CAACnB,QAAQ;AACrE,OAAO,MAAMwB,yBAAyB,GAAGA,CAAA,KAAOlB,KAAK,IACjDA,KAAK,CAACa,SAAS,CAAClB,SAAS;AAC7B,OAAO,MAAMwB,gBAAgB,GAAIC,YAAY,IAAMpB,KAAK,IAAK;EACzD,IAAIA,KAAK,CAACa,SAAS,CAACnB,QAAQ,EAAE;IAC1B,MAAM2B,cAAc,GAAG,EAAE;IACzB,KAAK,MAAMC,MAAM,IAAIF,YAAY,EAAE;MAC/B,KAAK,MAAMG,OAAO,IAAIvB,KAAK,CAACa,SAAS,CAACnB,QAAQ,EAAE;QAC5C,IAAI6B,OAAO,CAACC,GAAG,KAAKF,MAAM,EAAE;UACxBD,cAAc,CAACI,IAAI,CAACF,OAAO,CAAC;UAC5B;QACJ;MACJ;IACJ;IACA,OAAOF,cAAc;EACzB;EACA,OAAO,EAAE;AACb,CAAC;AAED,eAAeb,gBAAgB"},"metadata":{},"sourceType":"module"}